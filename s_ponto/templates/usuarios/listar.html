<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Lista de Usu√°rios</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h2 { text-align: center; color: #333; }
        .header-actions { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background-color: #f0f0f0; }
        .actions-cell { display: flex; gap: 5px; }
        a.btn, button.btn {
            display: inline-block; padding: 6px 12px; text-decoration: none;
            color: white; border-radius: 4px; border: none; cursor: pointer;
            font-size: 14px;
        }
        .btn-primary { background-color: #6A1B9A; }
        .btn-primary:hover { background-color: #4a0f6a; }
        .btn-secondary { background-color: #888; }
        .btn-secondary:hover { background-color: #666; }
        .btn-danger { background-color: #b30000; }
        .btn-danger:hover { background-color: #8c0000; }
    </style>
</head>
<body>
    <h2>Usu√°rios</h2>
    
    <div class="header-actions">
        <!-- CORRE√á√ÉO 1: url_for para o blueprint 'usuarios' e fun√ß√£o 'novo' -->
        <a href="{{ url_for('usuarios.novo') }}" class="btn btn-primary">+ Novo Usu√°rio</a>
        <!-- CORRE√á√ÉO 2: url_for para o blueprint 'main' e fun√ß√£o 'painel' -->
        <a href="{{ url_for('main.painel') }}" class="btn btn-secondary">‚Üê Voltar para o painel</a>
    </div>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Usu√°rio</th>
                <th>A√ß√µes</th>
            </tr>
        </thead>
        <tbody>
            {% for u in usuarios %}
            <tr>
                <td>{{ u.id }}</td>
                <td>{{ u.username }}</td>
                <td class="actions-cell">
                    <!-- CORRE√á√ÉO 3: url_for para 'usuarios.editar' -->
                    <a href="{{ url_for('usuarios.editar', id=u.id) }}" class="btn btn-primary">‚úèÔ∏è Editar</a>
                    
                    <!-- CORRE√á√ÉO 4: url_for para 'usuarios.excluir' -->
                    <form action="{{ url_for('usuarios.excluir', id=u.id) }}" method="POST" onsubmit="return confirm('Deseja excluir este usu√°rio?');">
                        <button type="submit" class="btn btn-danger">üóë Excluir</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>