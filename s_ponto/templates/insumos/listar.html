<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Lista de Insumos</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h2 { text-align: center; color: #333; }
        .header-actions { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background-color: #f0f0f0; }
        .actions-cell { display: flex; gap: 5px; }
        a.btn, button.btn {
            display: inline-block; padding: 6px 12px; text-decoration: none;
            color: white; border-radius: 4px; border: none; cursor: pointer;
            font-size: 14px;
        }
        .btn-primary { background-color: #6A1B9A; }
        .btn-primary:hover { background-color: #4a0f6a; }
        .btn-secondary { background-color: #888; }
        .btn-secondary:hover { background-color: #666; }
        .btn-danger { background-color: #b30000; }
        .btn-danger:hover { background-color: #800000; }
    </style>
</head>
<body>
    <h2>Insumos</h2>

    <div class="header-actions">
        <!-- CORRE√á√ÉO 1: url_for para o blueprint 'insumos' e fun√ß√£o 'novo' -->
        <a href="{{ url_for('insumos.novo') }}" class="btn btn-primary">+ Novo Insumo</a>
        <!-- CORRE√á√ÉO 2: url_for para o blueprint 'main' e fun√ß√£o 'painel' -->
        <a href="{{ url_for('main.painel') }}" class="btn btn-secondary">‚Üê Voltar</a>
    </div>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Tipo</th>
                <th>Fornecedor</th>
                <th>A√ß√µes</th>
            </tr>
        </thead>
        <tbody>
            {% for i in insumos %}
            <tr>
                <td>{{ i.id }}</td>
                <td>{{ i.nome }}</td>
                <td>{{ i.tipo or '-' }}</td>
                <td>{{ i.fornecedor.nome if i.fornecedor else '-' }}</td>
                <td class="actions-cell">
                  <!-- CORRE√á√ÉO 3: url_for para 'insumos.editar' -->
                  <a href="{{ url_for('insumos.editar', id=i.id) }}" class="btn btn-primary">‚úèÔ∏è Editar</a>
                  <!-- CORRE√á√ÉO 4: url_for para 'insumos.excluir' -->
                  <form action="{{ url_for('insumos.excluir', id=i.id) }}" method="POST" onsubmit="return confirm('Confirma exclus√£o?')">
                    <button type="submit" class="btn btn-danger">üóëÔ∏è Excluir</button>   
                  </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5">Nenhum insumo cadastrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>